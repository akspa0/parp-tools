["CDetailDoodadInst::CDetailDoodadInst`](0x006a2580) (0x006a2580)\n\n### Key Fields\n\n```c\nstruct CDetailDoodadInst {\n    TSLink<CDetailDoodadGeom> lameAssLink;  // Link to geometry\n    CDetailDoodadGeom* geom[2];              // 2 geometry pointers\n    CGxBuf* gxBuf[2];                       // 2 graphics buffers\n};\n```\n\n### Detail Doodad Geometry\n\n```c\nstruct CDetailDoodadGeom {\n    C3Vector position;      // Position in world space\n    C3Vector rotation;      // Rotation (Euler angles)\n    C3Vector scale;         // Scale\n    uint modelId;           // Model ID\n    uint textureId;         // Texture ID\n};\n```\n\n## Detail Doodad Creation\n\n**Address:** [`CMapChunk::CreateDetailDoodads`](0x006a6cf0) (0x006a6cf0)\n\n### Purpose\n\nCreate detail doodads for a chunk.\n\n### Algorithm\n\n1. Check if chunk is within detail doodad distance\n2. Generate random positions for doodads\n3. Place doodads on terrain surface\n4. Create geometry and graphics buffers\n5. Link to chunk\n\n### Pseudocode\n\n```c\nvoid CreateDetailDoodads(CMapChunk* chunk) {\n    // Check if chunk is within detail doodad distance\n    float distance = Distance(chunk->position, camPos);\n    if (distance > CWorld::detailDoodadDist) {\n        return;\n    }\n    \n    // Create detail doodad instance\n    chunk->detailDoodadInst = new CDetailDoodadInst();\n    \n    // Generate random positions for doodads\n    for (int i = 0; i < MAX_DETAIL_DOODADS; i++) {\n        // Generate random position within chunk\n        float x = RandomFloat(0.0f, 1.0f);\n        float y = RandomFloat(0.0f, 1.0f);\n        \n        // Get terrain height at position\n        float z = GetTerrainHeight(chunk->position.x + x * CHUNK_SIZE, \n                                   chunk->position.y + y * CHUNK_SIZE);\n        \n        // Create doodad geometry\n        CDetailDoodadGeom* geom = new CDetailDoodadGeom();\n        geom->position.x = chunk->position.x + x * CHUNK_SIZE;\n        geom->position.y = chunk->position.y + y * CHUNK_SIZE;\n        geom->position.z = z;\n        geom->rotation.x = RandomFloat(0.0f, 360.0f);\n        geom->rotation.y = RandomFloat(0.0f, 360.0f);\n        geom->rotation.z = RandomFloat(0.0f, 360.0f);\n        geom->scale.x = RandomFloat(0.5f, 1.5f);\n        geom->scale.y = RandomFloat(0.5f, 1.5f);\n        geom->scale.z = RandomFloat(0.5f, 1.5f);\n        geom->modelId = RandomModelId();\n        geom->textureId = RandomTextureId();\n        \n        // Add to detail doodad instance\n        chunk->detailDoodadInst->geom[i] = geom;\n    }\n    \n    // Create graphics buffers\n    for (int i = 0; i < 2; i++) {\n        chunk->detailDoodadInst->gxBuf[i] = CreateGraphicsBuffer(chunk->detailDoodadInst->geom[i]);\n    }\n}\n```\n\n## Detail Doodad Rendering\n\n### Purpose\n\nRender detail doodads for a chunk.\n\n### Algorithm\n\n1. Check if detail doodads exist\n2. Set up world transform for each doodad\n3. Render doodad geometry\n4. Restore world transform\n\n### Pseudocode\n\n```c\nvoid RenderDetailDoodads(CMapChunk* chunk) {\n    // Check if detail doodads exist\n    if (chunk->detailDoodadInst == NULL) {\n        return;\n    }\n    \n    // Render each doodad\n    for (int i = 0; i < 2; i++) {\n        CDetailDoodadGeom* geom = chunk->detailDoodadInst->geom[i];\n        if (geom == NULL) {\n            continue;\n        }\n        \n        // Set up world transform\n        C44Matrix worldMatrix;\n        worldMatrix = CreateTranslationMatrix(geom->position);\n        worldMatrix = worldMatrix * CreateRotationMatrix(geom->rotation);\n        worldMatrix = worldMatrix * CreateScaleMatrix(geom->scale);\n        \n        GxXformSet(GxXform_World, &worldMatrix);\n        \n        // Render doodad\n        RenderModel(geom->modelId, geom->textureId);\n    }\n}\n```\n\n## Detail Doodad Density\n\n### Console Commands\n\n- [`ConsoleCommand_DetailDoodadAlpha`](0x00665ff0) (0x00665ff0) - Set detail doodad alpha\n- [`ConsoleCommand_DetailDoodadTest`](0x00665fb0) (0x00665fb0) - Test detail doodads\n- [`ConsoleCommand_ShowDetailDoodads`](0x00665770) (0x00665770) - Show/hide detail doodads\n\n### Density Control\n\n```c\n// Detail doodad density\nfloat detailDoodadDensity = 1.0f;  // 0.0f to 1.0f\n\n// Detail doodad distance\nfloat detailDoodadDist = 100.0f;  // Distance from camera to show detail doodads\n\n// Maximum detail doodads per chunk\nconst int MAX_DETAIL_DOODADS = 64;\n```\n\n## Implementation Guidelines\n\n### C# Detail Doodads\n\n```csharp\npublic class DetailDoodadManager\n{\n    private class DetailDoodadInst\n    {\n        public DetailDoodadGeom[] Geoms { get; set; }  // 2 geometry pointers\n        public GraphicsBuffer[] GxBufs { get; set; }  // 2 graphics buffers\n    }\n    \n    private class DetailDoodadGeom\n    {\n        public C3Vector Position { get; set; }\n        public C3Vector Rotation { get; set; }\n        public C3Vector Scale { get; set; }\n        public uint ModelId { get; set; }\n        public uint TextureId { get; set; }\n    }\n    \n    private const float DETAIL_DOODAD_DISTANCE = 100.0f;\n    private const int MAX_DETAIL_DOODADS = 64;\n    \n    public void CreateDetailDoodads(TerrainChunk chunk, C3Vector cameraPosition)\n    {\n        // Check if chunk is within detail doodad distance\n        float distance = Vector3.Distance(chunk.Position, cameraPosition);\n        if (distance > DETAIL_DOODAD_DISTANCE)\n        {\n            return;\n        }\n        \n        // Create detail doodad instance\n        DetailDoodadInst inst = new DetailDoodadInst();\n        inst.Geoms = new DetailDoodadGeom[MAX_DETAIL_DOODADS];\n        inst.GxBufs = new GraphicsBuffer[MAX_DETAIL_DOODADS];\n        \n        // Generate random positions for doodads\n        Random random = new Random(chunk.Seed);\n        \n        for (int i = 0; i < MAX_DETAIL_DOODADS; i++)\n        {\n            // Generate random position within chunk\n            float x = (float)random.NextDouble();\n            float y = (float)random.NextDouble();\n            \n            // Get terrain height at position\n            float z = GetTerrainHeight(chunk.Position.X + x * CHUNK_SIZE, \n                                       chunk.Position.Y + y * CHUNK_SIZE);\n            \n            // Create doodad geometry\n            inst.Geoms[i] = new DetailDoodadGeom\n            {\n                Position = new C3Vector(\n                    chunk.Position.X + x * CHUNK_SIZE,\n                    chunk.Position.Y + y * CHUNK_SIZE,\n                    z),\n                Rotation = new C3Vector(\n                    (float)random.NextDouble() * 360.0f,\n                    (float)random.NextDouble() * 360.0f,\n                    (float)random.NextDouble() * 360.0f),\n                Scale = new C3Vector(\n                    0.5f + (float)random.NextDouble(),\n                    0.5f + (float)random.NextDouble(),\n                    0.5f + (float)random.NextDouble()),\n                ModelId = RandomModelId(random),\n                TextureId = RandomTextureId(random)\n            };\n            \n            // Create graphics buffer\n            inst.GxBufs[i] = CreateGraphicsBuffer(inst.Geoms[i]);\n        }\n        \n        chunk.DetailDoodadInst = inst;\n    }\n    \n    public void RenderDetailDoodads(TerrainChunk chunk)\n    {\n        // Check if detail doodads exist\n        if (chunk.DetailDoodadInst == null)\n        {\n            return;\n        }\n        \n        // Render each doodad\n        for (int i = 0; i < MAX_DETAIL_DOODADS; i++)\n        {\n            DetailDoodadGeom geom = chunk.DetailDoodadInst.Geoms[i];\n            if (geom == null)\n            {\n                continue;\n            }\n            \n            // Set up world transform\n            Matrix4x4 worldMatrix = Matrix4x4.CreateTranslation(geom.Position);\n            worldMatrix *= Matrix4x4.CreateRotationX(geom.Rotation.X * (float)Math.PI / 180.0f);\n            worldMatrix *= Matrix4x4.CreateRotationY(geom.Rotation.Y * (float)Math.PI / 180.0f);\n            worldMatrix *= Matrix4x4.CreateRotationZ(geom.Rotation.Z * (float)Math.PI / 180.0f);\n            worldMatrix *= Matrix4x4.CreateScale(geom.Scale);\n            \n            // Set world transform\n            GL.UniformMatrix4(worldMatrixLocation, false, ref worldMatrix);\n            \n            // Render doodad\n            RenderModel(geom.ModelId, geom.TextureId);\n        }\n    }\n    \n    private uint RandomModelId(Random random)\n    {\n        // Return random model ID\n        return (uint)random.Next(0, 100);\n    }\n    \n    private uint RandomTextureId(Random random)\n    {\n        // Return random texture ID\n        return (uint)random.Next(0, 100);\n    }\n    \n    private GraphicsBuffer CreateGraphicsBuffer(DetailDoodadGeom geom)\n    {\n        // Create graphics buffer for doodad\n        return new GraphicsBuffer();\n    }\n    \n    private void RenderModel(uint modelId, uint textureId)\n    {\n        // Render model with texture\n        // This would involve binding the model and texture and drawing\n    }\n}\n```\n\n## References\n\n- [`CDetailDoodadInst::CDetailDoodadInst`](0x006a2580) (0x006a2580) - Detail doodad instance constructor\n- [`CMapChunk::CreateDetailDoodads`](0x006a6cf0) (0x006a6cf0) - Create detail doodads for chunk\n- [`ConsoleCommand_DetailDoodadAlpha`](0x00665ff0) (0x00665ff0) - Set detail doodad alpha\n- [`ConsoleCommand_DetailDoodadTest`](0x00665fb0) (0x00665fb0) - Test detail doodads\n- [`ConsoleCommand_ShowDetailDoodads`](0x00665770) (0x00665770) - Show/hide detail doodads"]